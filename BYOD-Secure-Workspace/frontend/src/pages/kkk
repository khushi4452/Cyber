import React, { useEffect, useState } from 'react';
import './Dashboard.css';

const Dashboard = () => {
  const [logs, setLogs] = useState([]);
  const [lastUpdated, setLastUpdated] = useState(null);

  useEffect(() => {
    const fetchLogs = () => {
      fetch('http://localhost:5000/api/logs')
        .then((res) => res.json())
        .then((data) => {
          if (data.success) {
            setLogs(data.logs);
            setLastUpdated(new Date().toLocaleString());
          }
        });
    };

    fetchLogs();
    const interval = setInterval(fetchLogs, 5000);
    return () => clearInterval(interval);
  }, []);

  return (
    <div className="dashboard">
      <aside className="sidebar">
        <h2>ğŸ›¡ Admin</h2>
        <nav>
          <a href="#">ğŸ“Š Dashboard</a>
          <a href="#">ğŸ“¤ Upload</a>
          <a href="#">ğŸ“œ Logs</a>
        </nav>
        <button className="theme-toggle">ğŸŒ™ Dark</button>
      </aside>

      <main className="content">
        <h1>ğŸ“ˆ Admin Overview</h1>

        <div className="cards">
          <div className="card green">
            <h3>Total Users</h3>
            <p>42 registered</p>
          </div>
          <div className="card blue">
            <h3>Active Sessions</h3>
            <p>9 currently online</p>
          </div>
          <div className="card orange">
            <h3>Files Uploaded</h3>
            <p>18 uploaded today</p>
          </div>
        </div>

        <div className="grid-container">
          <div className="card-section">
            <h2>ğŸ‘¤ Employee Details</h2>
            <p><strong>Name:</strong> Rameshwari Singh</p>
            <p><strong>Department:</strong> IT</p>
            <p><strong>Role:</strong> Intern</p>
            <p><strong>Joined:</strong> March 2024</p>
          </div>

          <div className="card-section">
            <h2>ğŸ—‚ Folder Monitoring</h2>
            <p><strong>Monitored Folder:</strong> C:/CyberSecure_Workspace</p>
            <p><strong>Status:</strong> âœ… Active</p>
            <p><strong>Last Updated:</strong> {lastUpdated || 'Loading...'}</p>
          </div>
        </div>

        <div className="card full-width">
          <h2>ğŸ“ Folder Activity Logs</h2>
          {logs.length > 0 ? (
            <table className="log-table">
              <thead>
                <tr>
                  <th>Timestamp</th>
                  <th>Activity</th>
                  <th>File Path</th>
                </tr>
              </thead>
              <tbody>
                {logs.map((log, index) => {
                  const parts = log.split('] ');
                  const timestamp = parts[0].replace('[', '');
                  const [activityType, filePath] = parts[1].split(': ');
                  return (
                    <tr key={index}>
                      <td>{timestamp}</td>
                      <td>{activityType}</td>
                      <td>{filePath}</td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          ) : (
            <p>No folder activity detected yet.</p>
          )}
        </div>
      </main>
    </div>
  );
};

export default Dashboard;


import React, { useState } from 'react';
import axios from 'axios';
import './Upload.css';

const Upload = () => {
  const [file, setFile] = useState(null);
  const [status, setStatus] = useState('');

  const handleChange = (e) => {
    setFile(e.target.files[0]);
    setStatus('');
  };

  const handleUpload = async () => {
    if (!file) {
      setStatus('Please select a file.');
      return;
    }

    const formData = new FormData();
    formData.append('file', file);

    try {
      const res = await axios.post('http://localhost:5000/api/upload', formData, {
        headers: { 'Content-Type': 'multipart/form-data' }
      });

      if (res.data.success) {
        setStatus(`âœ… Uploaded: ${res.data.file}`);
      } else {
        setStatus('âŒ Upload failed');
      }
    } catch (err) {
      setStatus('âŒ Error uploading file');
    }
  };

  return (
    <div className="upload-page">
      <h2>ğŸ“¤ Upload Work Files</h2>
      <input type="file" onChange={handleChange} />
      <button onClick={handleUpload}>Upload</button>
      <p>{status}</p>
    </div>
  );
};

export default Upload;

import React, { useState } from 'react';
import axios from 'axios';
import './Upload.css'; // External styles

const Upload = () => {
  const [file, setFile] = useState(null);
  const [status, setStatus] = useState('');

  const handleChange = (e) => {
    setFile(e.target.files[0]);
    setStatus('');
  };

  const handleUpload = async () => {
    if (!file) {
      setStatus('â— Please select a file.');
      return;
    }

    const formData = new FormData();
    formData.append('file', file);

    try {
      const res = await axios.post('http://localhost:5000/api/upload', formData);
      if (res.data.success) {
        setStatus(`âœ… File uploaded: ${res.data.filename}`);
        setFile(null);
      } else {
        setStatus('âŒ Upload failed.');
      }
    } catch (err) {
      console.error(err);
      setStatus('âŒ Server error during upload.');
    }
  };

  return (
    <div className="upload-container">
      <div className="upload-box">
        <div className="upload-image">
          <img src="https://cdn-icons-png.flaticon.com/512/7249/7249198.png" alt="upload" />
        </div>
        <div className="upload-content">
          <h2>ğŸ“¤ Upload Work Files</h2>
          <input type="file" onChange={handleChange} />
          <button onClick={handleUpload}>Upload</button>
          {status && <p className={`status ${status.startsWith('âœ…') ? 'success' : 'error'}`}>{status}</p>}
        </div>
      </div>
    </div>
  );
};

export default Upload;
